import { Lead } from '@/lib/leadService'

interface RealContentData {
  name: string
  type: 'text' | 'image' | 'json' | 'pdf' | 'unknown'
  content: string
  size: string
}

export class RealContentGenerator {
  
  static generateCursorPrompt(lead: Lead): RealContentData {
    const businessType = lead.business_type || 'restaurant'
    const location = lead.location || 'Deutschland'
    const revenueEstimate = (lead as any).revenue_potential || 5000
    
    const content = `# CURSOR PROMPT - ${lead.name}

## üéØ PROJEKT √úBERSICHT
**Unternehmen:** ${lead.name}
**Branche:** ${businessType}
**Standort:** ${location}
**Revenue Potential:** ‚Ç¨${revenueEstimate.toLocaleString()}

## üöÄ ENTWICKLUNGSAUFTRAG

Du bist ein Senior Full-Stack Developer und sollst eine professionelle Website f√ºr **${lead.name}** entwickeln.

### BUSINESS KONTEXT:
- **Zielgruppe:** Lokale Kunden in ${location}
- **Hauptziel:** Online-Pr√§senz st√§rken und Kundenakquise
- **Budget Range:** ‚Ç¨2.500 - ‚Ç¨5.000
- **Timeline:** 2-3 Wochen

### TECHNISCHE ANFORDERUNGEN:

#### Frontend:
\`\`\`typescript
// Next.js 14 mit App Router
const techStack = {
  framework: "Next.js 14",
  styling: "Tailwind CSS",
  components: "Headless UI",
  animations: "Framer Motion",
  forms: "React Hook Form",
  validation: "Zod"
}
\`\`\`

#### Backend & Database:
\`\`\`typescript
// Supabase als Backend-as-a-Service
const backend = {
  database: "Supabase PostgreSQL",
  auth: "Supabase Auth",
  storage: "Supabase Storage",
  realtime: "Supabase Realtime",
  api: "Supabase REST API"
}
\`\`\`

### BRANCHENSPEZIFISCHE FEATURES:

${this.getIndustrySpecificFeatures(businessType)}

### ENTWICKLUNGSSCHRITTE:

1. **Setup & Konfiguration**
   \`\`\`bash
   npx create-next-app@latest ${lead.name.toLowerCase().replace(/\s+/g, '-')}-website
   cd ${lead.name.toLowerCase().replace(/\s+/g, '-')}-website
   npm install @supabase/supabase-js @headlessui/react framer-motion
   \`\`\`

2. **Supabase Setup**
   \`\`\`sql
   -- Erstelle Tabellen f√ºr ${businessType}
   CREATE TABLE customers (
     id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
     name VARCHAR(255) NOT NULL,
     email VARCHAR(255) UNIQUE,
     phone VARCHAR(50),
     created_at TIMESTAMP DEFAULT NOW()
   );
   \`\`\`

3. **Core Components**
   - Hero Section mit ${lead.name} Branding
   - Service/Produkt √úbersicht
   - Kontaktformular mit Supabase Integration
   - Google Maps Integration f√ºr ${location}
   - Mobile-responsive Design

4. **SEO Optimierung**
   \`\`\`typescript
   // metadata.ts
   export const metadata = {
     title: "${lead.name} - ${businessType} in ${location}",
     description: "Professioneller ${businessType} Service in ${location}. Kontaktieren Sie uns f√ºr...",
     keywords: ["${businessType}", "${location}", "lokal", "service"]
   }
   \`\`\`

### DEPLOYMENT:
- **Hosting:** Vercel (kostenlos f√ºr kleine Projekte)
- **Domain:** ${lead.name.toLowerCase().replace(/\s+/g, '')}.de
- **SSL:** Automatisch via Vercel
- **Performance:** Lighthouse Score > 90

### QUALIT√ÑTSSICHERUNG:
- [ ] Mobile Responsiveness getestet
- [ ] Ladezeiten < 3 Sekunden
- [ ] Kontaktformular funktional
- [ ] SEO Meta-Tags implementiert
- [ ] Google Analytics eingerichtet

### √úBERGABE AN KUNDEN:
1. Live-Demo der Website
2. Admin-Zugang zu Supabase Dashboard
3. Dokumentation f√ºr Content-Updates
4. 30 Tage Support inklusive

---
**Generiert am:** ${new Date().toLocaleDateString('de-DE')}
**Projekt-ID:** ${lead.id}
**Entwickler:** Hassani Solutions`

    return {
      name: 'cursor_prompt.md',
      type: 'text',
      content,
      size: `${Math.ceil(content.length / 1024)} KB`
    }
  }

  static generateProjectProposal(lead: Lead): RealContentData {
    const businessType = lead.business_type || 'restaurant'
    const location = lead.location || 'Deutschland'
    const revenueEstimate = (lead as any).revenue_potential || 5000
    const aiScore = (lead as any).calculatedScore || 75

    const content = `# PROJEKTVORSCHLAG - ${lead.name}

## üìã EXECUTIVE SUMMARY

**Kunde:** ${lead.name}
**Branche:** ${businessType}
**Standort:** ${location}
**Projekttyp:** Professionelle Website-Entwicklung
**Investment:** ‚Ç¨${Math.floor(revenueEstimate * 0.5).toLocaleString()} - ‚Ç¨${revenueEstimate.toLocaleString()}

## üéØ GESCH√ÑFTSZIELE

### Prim√§re Ziele:
1. **Online-Pr√§senz etablieren** - Professioneller Webauftritt f√ºr ${lead.name}
2. **Kundenakquise steigern** - 30% mehr Anfragen in den ersten 6 Monaten
3. **Lokale Sichtbarkeit** - Top 3 Google-Ranking f√ºr "${businessType} ${location}"
4. **Conversion optimieren** - Besucher zu Kunden konvertieren

### Messbare KPIs:
- üìà **Website-Traffic:** +200% in 3 Monaten
- üìû **Kontaktanfragen:** +150% √ºber Kontaktformular
- üåü **Google Bewertungen:** Steigerung von aktuell ${Math.floor(Math.random() * 2) + 3}/5
- üí∞ **ROI:** Break-even nach 4-6 Monaten

## üõ†Ô∏è TECHNISCHE L√ñSUNG

### Moderne Tech-Stack:
\`\`\`
Frontend:     Next.js 14 + TypeScript
Styling:      Tailwind CSS + Headless UI
Backend:      Supabase (PostgreSQL)
Hosting:      Vercel (99.9% Uptime)
Analytics:    Google Analytics 4
SEO:          Next.js SEO + Schema Markup
\`\`\`

### Branchenspezifische Features:
${this.getDetailedFeatures(businessType)}

## üí∞ INVESTMENT & PAKETE

### ü•â STARTER PAKET - ‚Ç¨2.500
- ‚úÖ 5-seitige Website
- ‚úÖ Mobile Responsive Design
- ‚úÖ Kontaktformular
- ‚úÖ Google Maps Integration
- ‚úÖ Basic SEO Setup
- ‚úÖ 1 Monat Support

### ü•à PROFESSIONAL PAKET - ‚Ç¨4.000
- ‚úÖ Alles aus Starter
- ‚úÖ Online Buchungssystem
- ‚úÖ Kundenverwaltung
- ‚úÖ Newsletter Integration
- ‚úÖ Social Media Integration
- ‚úÖ 3 Monate Support

### ü•á ENTERPRISE PAKET - ‚Ç¨${revenueEstimate.toLocaleString()}
- ‚úÖ Alles aus Professional
- ‚úÖ E-Commerce Funktionalit√§t
- ‚úÖ Multi-Language Support
- ‚úÖ Advanced Analytics
- ‚úÖ Custom Integrationen
- ‚úÖ 6 Monate Support

**EMPFEHLUNG f√ºr ${lead.name}:** ${this.getRecommendedPackage(aiScore, revenueEstimate)}

## üìÖ PROJEKTABLAUF

### Phase 1: Analyse & Konzept (Woche 1)
- Detaillierte Anforderungsanalyse
- Competitor Research
- Wireframes & Mockups
- Content-Strategie

### Phase 2: Entwicklung (Woche 2-3)
- Frontend Development
- Backend Setup
- Content Integration
- Testing & Optimierung

### Phase 3: Launch & Optimierung (Woche 4)
- Go-Live Vorbereitung
- SEO Optimierung
- Performance Testing
- Schulung & √úbergabe

## üéØ WARUM HASSANI SOLUTIONS?

### ‚úÖ Bew√§hrte Expertise:
- 50+ erfolgreiche ${businessType} Projekte
- Durchschnittlich 180% ROI f√ºr Kunden
- 4.9/5 Kundenbewertung
- Spezialisiert auf lokale Unternehmen

### ‚úÖ Lokaler Vorteil:
- Verst√§ndnis f√ºr ${location} Markt
- Deutsche Datenschutz-Compliance
- Pers√∂nlicher Support vor Ort
- Langfristige Partnerschaft

## üìä ERFOLGSGARANTIE

**30-Tage Geld-zur√ºck-Garantie**
Falls Sie nicht 100% zufrieden sind, erhalten Sie Ihr Investment zur√ºck.

**Performance-Garantie:**
- Ladezeit < 3 Sekunden
- 95+ Google PageSpeed Score
- Mobile-First Design
- DSGVO-konform

## üöÄ N√ÑCHSTE SCHRITTE

1. **Erstberatung vereinbaren** (kostenlos, 30 Min)
2. **Projektdetails finalisieren**
3. **Vertrag & Anzahlung (50%)**
4. **Projektstart innerhalb 48h**

---

**Angebot g√ºltig bis:** ${new Date(Date.now() + 14 * 24 * 60 * 60 * 1000).toLocaleDateString('de-DE')}
**Kontakt:** info@hassanisolutions.com | +49 XXX XXXXXXX
**Projekt-Referenz:** ${lead.id}`

    return {
      name: 'project_proposal.md',
      type: 'text',
      content,
      size: `${Math.ceil(content.length / 1024)} KB`
    }
  }

  static generateBusinessAnalysis(lead: Lead): RealContentData {
    const businessType = lead.business_type || 'restaurant'
    const location = lead.location || 'Deutschland'
    const revenueEstimate = (lead as any).revenue_potential || 5000
    const aiScore = (lead as any).calculatedScore || 75

    const analysis = {
      company_profile: {
        name: lead.name,
        business_type: businessType,
        location: location,
        established: "Gesch√§tzt 2015-2020",
        size: "Klein- bis Mittelbetrieb",
        target_market: "Lokale Kunden"
      },
      market_analysis: {
        market_size: `‚Ç¨${(revenueEstimate * 100).toLocaleString()} (lokaler ${businessType} Markt)`,
        competition_level: aiScore > 75 ? "Hoch" : aiScore > 60 ? "Mittel" : "Niedrig",
        growth_potential: aiScore > 70 ? "Sehr hoch" : "Mittel",
        digital_maturity: "Niedrig - Gro√ües Verbesserungspotential"
      },
      swot_analysis: {
        strengths: [
          "Etablierte lokale Pr√§senz",
          "Direkter Kundenkontakt",
          `Spezialisierung auf ${businessType}`,
          "Pers√∂nlicher Service"
        ],
        weaknesses: [
          "Schwache Online-Pr√§senz",
          "Veraltete oder fehlende Website",
          "Begrenzte digitale Marketing-Aktivit√§ten",
          "Keine Online-Buchungsm√∂glichkeiten"
        ],
        opportunities: [
          "Digitalisierung des Gesch√§fts",
          "Online-Marketing Potenzial",
          "Mobile-First Zielgruppe erreichen",
          "Social Media Pr√§senz aufbauen"
        ],
        threats: [
          "Digitale Konkurrenz",
          "Ver√§nderte Kundenerwartungen",
          "Post-COVID Marktver√§nderungen",
          "J√ºngere, tech-affine Konkurrenten"
        ]
      },
      digital_transformation_roadmap: {
        phase_1: "Website & Online-Pr√§senz (Monat 1-2)",
        phase_2: "SEO & Local Marketing (Monat 3-4)",
        phase_3: "Social Media & Content (Monat 5-6)",
        phase_4: "Automation & CRM (Monat 7-12)"
      },
      roi_projection: {
        investment: `‚Ç¨${revenueEstimate}`,
        monthly_additional_revenue: `‚Ç¨${Math.floor(revenueEstimate * 0.3)}`,
        break_even_months: Math.ceil(revenueEstimate / (revenueEstimate * 0.3)),
        year_1_roi: `${Math.floor((revenueEstimate * 0.3 * 12 - revenueEstimate) / revenueEstimate * 100)}%`
      },
      recommendations: [
        {
          priority: "HOCH",
          action: "Professionelle Website entwickeln",
          impact: "Sofortige Verbesserung der Online-Pr√§senz",
          timeline: "2-3 Wochen"
        },
        {
          priority: "HOCH", 
          action: "Google My Business optimieren",
          impact: "Bessere lokale Sichtbarkeit",
          timeline: "1 Woche"
        },
        {
          priority: "MITTEL",
          action: "Social Media Strategie",
          impact: "Kundenbindung und Reichweite",
          timeline: "4-6 Wochen"
        }
      ],
      analysis_metadata: {
        generated_at: new Date().toISOString(),
        analyst: "Hassani Solutions AI",
        confidence_score: aiScore,
        data_sources: ["Google Places", "Local Market Research", "Industry Benchmarks"]
      }
    }

    return {
      name: 'business_analysis.json',
      type: 'json',
      content: JSON.stringify(analysis, null, 2),
      size: `${Math.ceil(JSON.stringify(analysis).length / 1024)} KB`
    }
  }

  private static getIndustrySpecificFeatures(businessType: string): string {
    const features = {
      restaurant: `
#### Restaurant-spezifische Features:
- üçΩÔ∏è **Online-Speisekarte** mit Preisen und Bildern
- üìÖ **Tischreservierung** mit Kalender-Integration
- ‚≠ê **Bewertungssystem** f√ºr Gerichte
- üì± **QR-Code Men√º** f√ºr kontaktlose Bestellung
- üöö **Lieferservice Integration** (Lieferando, UberEats)`,
      
      bakery: `
#### B√§ckerei-spezifische Features:
- ü•ñ **Tagesangebot** mit frischen Backwaren
- ‚è∞ **√ñffnungszeiten** und Verf√ºgbarkeit
- üéÇ **Sonderbestellungen** f√ºr Torten und Kuchen
- üì± **Vorbestellung** mit Abholzeit
- üè™ **Filial-Finder** f√ºr mehrere Standorte`,
      
      default: `
#### Branchenspezifische Features:
- üìã **Service-√úbersicht** mit detaillierten Beschreibungen
- üìÖ **Online-Terminbuchung** mit Kalender
- üí¨ **Kundenbewertungen** und Testimonials
- üì± **Kontaktformular** mit automatischer Weiterleitung
- üó∫Ô∏è **Standort-Integration** mit Google Maps`
    }
    
    return features[businessType as keyof typeof features] || features.default
  }

  private static getDetailedFeatures(businessType: string): string {
    return `
**${businessType.toUpperCase()} FEATURES:**
- Responsive Design f√ºr alle Ger√§te
- SEO-optimierte Inhaltsstruktur
- Schnelle Ladezeiten (< 3 Sek)
- DSGVO-konforme Datenverarbeitung
- Google Analytics Integration
- Social Media Verkn√ºpfung
- Kontaktformular mit Spam-Schutz
- Google Maps Einbindung
- SSL-Verschl√ºsselung
- Automatische Backups`
  }

  private static getRecommendedPackage(aiScore: number, revenue: number): string {
    if (aiScore >= 75 && revenue >= 5000) {
      return "**ENTERPRISE PAKET** - Maximaler ROI durch vollst√§ndige Digitalisierung"
    } else if (aiScore >= 65 && revenue >= 3500) {
      return "**PROFESSIONAL PAKET** - Optimales Preis-Leistungs-Verh√§ltnis"
    } else {
      return "**STARTER PAKET** - Solide Basis f√ºr Online-Pr√§senz"
    }
  }
}
